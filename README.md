# pentest-vm-config
An Ansible project to configure VMs. Manually setting up VMs is a bit of a hassle. Think of installing tools and configuring them, global git settings, creating SSH keys, changing the default shell to ZSH, etc. Everything is set to be idempotent.

Most tools will be installed with apt, however Python tools use pipx. Tools that can't be installed with apt or pipx, will be pulled directly from Github and stored as submodules in the `/tools` folder.

* apt (non-python tools)	- updates with: `apt update && apt upgrade` 
* pipx (python tools)		- updates with: `pipx upgrade-all`
* Github/git (other)		- updates with: `git submodule update --remote`

## Install
To use this repository, a couple of programs are required:

* git (to clone this repo)
* pip (required for ansible)
* pipx (to install python tools, including ansible)
* ansible (to configure the VM)

Oneliner to install all programs:

```bash
sudo apt update && sudo apt install -y git python3-pip pipx && pipx install ansible --include-deps && pipx ensurepath && exec $SHELL
```

Next, clone this repository:

```bash
git clone https://github.com/fjfinch/pentest-vm-config.git
```

## Run
If you want to configure multiple hosts, add them in the inventory file. To run the playbook, go to the `ansible/` folder and run:

```bash
ansible-playbook main.yml -i inventory.ini -K
```

To test the playbook first without changing a thing, add the `-C` flag:

```bash
ansible-playbook main.yml -i inventory.ini -K -C
```

To make sure to uphold most best practices:

```bash
ansible-lint main.yml
```
