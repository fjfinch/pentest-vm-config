# pentest-vm-config
An Ansible project to configure my VMs. Just so I don't have to manually set up everything, every time. Think of installing tools and configuring them, global Git settings, creating SSH keys and changing the default shell to ZSH. Everything is set up to be idempotent.

Non-python tools will be installed with APT and python tools with pipx:

* apt (non-python tools)
* pipx (python tools)

## Install
To use this repo, a couple of programs are required:

* git (to clone this repo)
* pip (required for ansible)
* pipx (to install python tools, including ansible)
* ansible (to configure the VM)

Oneliner to install all programs:

```bash
sudo apt update && sudo apt install -y git python3-pip pipx && pipx install ansible --include-deps && pipx ensurepath && exec $SHELL
```

Next, clone this repo:

```bash
git clone https://github.com/fjfinch/pentest-vm-config.git
```

## Run
If you want to configure multiple hosts, add them in the inventory file. To run the playbook, go to the `ansible/` folder and run:

```bash
ansible-playbook main.yml -i inventory.ini -K
```

To test the playbook first without changing a thing, add the `-C` flag:

```bash
ansible-playbook main.yml -i inventory.ini -K -C
```

To make sure to uphold most best practices:

```bash
ansible-lint main.yml
```
